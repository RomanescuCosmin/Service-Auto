<!DOCTYPE html>
<html lang="ro" th:replace="~{fragments/layout :: layout(~{::title}, ~{::section})}"
      xmlns:x-transition="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Programările mele</title>
</head>

<body class="bg-slate-50">
<section x-data="{ showContent:false }"
         x-init="setTimeout(()=>showContent=true,120)"
         class="relative min-h-screen bg-slate-50">


    <div x-show="showContent"
         x-transition:enter="transition ease-out duration-700"
         x-transition:enter-start="opacity-0 translate-y-3"
         x-transition:enter-end="opacity-100 translate-y-0"
         class="relative">

        <!-- FULL-WIDTH HEADER -->
        <header class="w-full px-4 sm:px-6 lg:px-10 pt-10">
            <div class="rounded-[28px] border border-slate-200 bg-white shadow-sm">
                <div class="px-6 sm:px-8 py-8">
                    <div class="flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between">
                        <div class="max-w-3xl">
                            <p class="text-xs font-semibold uppercase tracking-[0.32em] text-slate-400">Programările
                                mele</p>

                            <div class="mt-3 flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
                                <h1 class="text-3xl md:text-4xl font-semibold tracking-tight text-slate-900">
                                    Panou client • Service Auto
                                </h1>

                                <!-- Status chips -->
                                <div class="flex flex-wrap gap-2">
                  <span class="inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-[11px] font-semibold text-emerald-700 ring-1 ring-emerald-100">
                    <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span> Confirmată
                  </span>
                                    <span class="inline-flex items-center gap-2 rounded-full bg-amber-50 px-3 py-1 text-[11px] font-semibold text-amber-700 ring-1 ring-amber-100">
                    <span class="h-1.5 w-1.5 rounded-full bg-amber-500"></span> În așteptare
                  </span>
                                    <span class="inline-flex items-center gap-2 rounded-full bg-rose-50 px-3 py-1 text-[11px] font-semibold text-rose-700 ring-1 ring-rose-100">
                    <span class="h-1.5 w-1.5 rounded-full bg-rose-500"></span> Anulată
                  </span>
                                </div>
                            </div>

                            <p class="mt-3 text-sm leading-6 text-slate-600">
                                Urmărește programările, statusul și documentele.
                            </p>

                            <div class="mt-6 flex flex-wrap gap-3">
                                <a th:href="@{/programare}"
                                   class="inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 active:scale-[0.99]">
                                    Programează o vizită
                                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                         stroke-width="2">
                                        <path d="M12 5v14"/>
                                        <path d="M5 12h14"/>
                                    </svg>
                                </a>

                                <a th:href="@{/contact}"
                                   class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2.5 text-sm font-semibold text-slate-700 hover:border-slate-300 hover:text-slate-900 active:scale-[0.99]">
                                    Contact rapid
                                    <svg class="h-4 w-4 text-slate-500" viewBox="0 0 24 24" fill="none"
                                         stroke="currentColor" stroke-width="2">
                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4 2h3a2 2 0 0 1 2 1.72c.12.81.3 1.6.54 2.36a2 2 0 0 1-.45 2.11L8 9a16 16 0 0 0 7 7l.81-1.09a2 2 0 0 1 2.11-.45c.76.24 1.55.42 2.36.54A2 2 0 0 1 22 16.92z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <!-- KPI CARDS -->
                        <div class="grid gap-4 sm:grid-cols-3 lg:w-[520px]">
                            <div class="rounded-2xl border border-slate-200 bg-slate-50 p-5">
                                <p class="text-[11px] font-semibold uppercase tracking-[0.22em] text-slate-500">
                                    Total</p>
                                <p class="mt-2 text-3xl font-bold text-slate-900" th:text="${programareList.size()}">
                                    0</p>
                                <p class="mt-1 text-xs text-slate-500">Programări în cont.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FILTER BAR (UI only) -->
                <div class="border-t border-slate-200 bg-white px-6 sm:px-8 py-4">
                    <div class="flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between">
                        <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
                            <div class="relative w-full sm:w-[360px]">
                                <div class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-slate-400">
                                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                         stroke-width="2">
                                        <circle cx="11" cy="11" r="7"/>
                                        <path d="M21 21l-4.3-4.3"/>
                                    </svg>
                                </div>
                                <input type="text"
                                       placeholder="Caută după nume, marcă, model, serie șasiu..."
                                       class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 pl-10 pr-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-slate-300 focus:outline-none"/>
                            </div>

                            <div class="flex flex-wrap gap-2">
                                <button type="button"
                                        class="rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:border-slate-300">
                                    Toate
                                </button>
                                <button type="button"
                                        class="rounded-full border border-emerald-200 bg-emerald-50 px-4 py-2 text-sm font-semibold text-emerald-700 hover:bg-emerald-100/60">
                                    Confirmate
                                </button>
                                <button type="button"
                                        class="rounded-full border border-amber-200 bg-amber-50 px-4 py-2 text-sm font-semibold text-amber-700 hover:bg-amber-100/60">
                                    În așteptare
                                </button>
                                <button type="button"
                                        class="rounded-full border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100/60">
                                    Anulate
                                </button>
                            </div>
                        </div>

                        <div class="flex flex-wrap items-center gap-2">
                            <span class="text-xs font-semibold text-slate-500">Sortare:</span>
                            <button type="button"
                                    class="rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:border-slate-300">
                                Dată (crescător)
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </header>

        <!-- GRID CARDURI -->
        <main class="px-6 lg:px-10 py-8">

            <div th:if="${#lists.isEmpty(programareList)}"
                 class="rounded-3xl border border-dashed border-slate-300 bg-white p-12 text-center">
                <h3 class="text-lg font-semibold">Nu ai programări încă</h3>
            </div>

            <div th:if="${!#lists.isEmpty(programareList)}"
                 class="grid gap-5
                        grid-cols-1
                        sm:grid-cols-2
                        lg:grid-cols-3
                        xl:grid-cols-4">

                <!-- CARD -->
                <div th:each="programare : ${programareList}"
                     class="relative rounded-2xl border border-slate-200 bg-white p-5
                            hover:shadow-md transition">

                    <!-- STATUS -->
                    <span class="absolute top-4 right-4 inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold rounded-full border"
                          th:classappend="
                          ${programare.confirmed} ? 'bg-emerald-100 text-emerald-800 border-emerald-300' :
                          (${programare.canceled} ? 'bg-rose-100 text-rose-800 border-rose-300' :
                          'bg-amber-100 text-amber-900 border-amber-300')">
                        <span class="h-1.5 w-1.5 rounded-full"
                              th:classappend="
                              ${programare.confirmed} ? 'bg-emerald-600' :
                              (${programare.canceled} ? 'bg-rose-600' : 'bg-amber-600')"></span>
                        <span th:text="
                          ${programare.confirmed} ? 'Confirmată' :
                          (${programare.canceled} ? 'Anulată' : 'În așteptare')">
                        </span>
                    </span>

                    <!-- DATE -->
                    <p class="text-xs text-slate-500"
                       th:text="${#temporals.format(programare.dataProgramare, 'dd MMM yyyy')}">
                        22 Ian 2026
                    </p>
                    <p class="text-sm font-semibold text-slate-900"
                       th:text="|${#numbers.formatInteger(programare.oraProgramare,2)}:${#numbers.formatInteger(programare.minutProgramare,2)}|">
                        09:00
                    </p>

                    <!-- CLIENT -->
                    <p class="mt-3 font-semibold text-slate-900 truncate"
                       th:text="${programare.getNume()}">
                        Nume Client
                    </p>

                    <!-- MASINA -->
                    <p class="mt-1 text-sm text-slate-700 truncate">
                        <span th:text="${programare.marca?.nume}">Ford</span>
                        <span th:text="${programare.modelAuto?.numeModel}">Fiesta</span>
                    </p>

                    <!-- DOCUMENT -->
                    <p class="mt-2 text-xs text-slate-500 truncate"
                       th:if="${programare.fileStorage != null}"
                       th:text="${programare.fileStorage.fileOriginalName}">
                        document.pdf
                    </p>
                    <p class="mt-2 text-xs italic text-slate-400"
                       th:unless="${programare.fileStorage != null}">
                        Fără document
                    </p>

                    <!-- ACTIONS -->
                    <div class="mt-3 flex gap-2">
                        <a th:if="${programare.fileStorage != null}"
                           th:href="@{|/files/${programare.fileStorage.id}|}"
                           class="px-3 py-1.5 text-[11px] font-semibold uppercase tracking-wide
              rounded-md border border-slate-700
              bg-slate-800 text-white
              hover:bg-slate-700 transition">
                            Descarcă
                        </a>

                        <button th:if="${!programare.canceled}"
                                class="px-3 py-1.5 text-[11px] font-semibold uppercase tracking-wide
                   rounded-md border border-rose-300
                   bg-rose-50 text-rose-600
                   hover:bg-rose-100 transition">
                            Anulează
                        </button>
                    </div>


                </div>
            </div>
        </main>
    </div>
</section>
</body>
</html>
